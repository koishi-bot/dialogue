import{_ as a,m as t,n as e,Q as s}from"./chunks/framework.4100087b.js";const v=JSON.parse('{"title":"其他机制","description":"","frontmatter":{},"headers":[],"relativePath":"zh-CN/misc.md","filePath":"zh-CN/misc.md"}'),n={name:"zh-CN/misc.md"},o=s(`<h1 id="其他机制" tabindex="-1">其他机制 <a class="header-anchor" href="#其他机制" aria-label="Permalink to &quot;其他机制&quot;">​</a></h1><h2 id="钩子问答" tabindex="-1">钩子问答 <a class="header-anchor" href="#钩子问答" aria-label="Permalink to &quot;钩子问答&quot;">​</a></h2><p>对于特定的事件，Koishi 还提供了<strong>钩子问答</strong>机制。</p><h2 id="署名机制" tabindex="-1">署名机制 <a class="header-anchor" href="#署名机制" aria-label="Permalink to &quot;署名机制&quot;">​</a></h2><p>为了方便管理，教学系统中的每个问答都是可以被署名的。当一个问答被添加时，添加者将被默认标记为问答的作者。<strong>作者可以完全控制自己所署名的问答（修改和删除），但想要控制其他用户署名的问答就必须拥有 3 级权限</strong>。</p><p>如果想要手动设置作者，可以使用 <code>-w uid</code> 或者 <code>-w @user</code> 的方式。除此以外，Koishi 也允许匿名教学。任何用户都可以通过 <code>-W</code> 来设置匿名问答（但是如果没有 3 级权限，即使是作者本人也无法修改）。这两个选项在搜索中也可以使用，例如用 <code>-W</code> 表示只搜索匿名添加的问答。</p><p>除此以外，还有极少数的题目被标记为<strong>锁定</strong>。标记为锁定的问题无论是否匿名，必须 4 级权限才能修改。可以使用 <code>-f</code> 将一个问答标记为锁定，使用 <code>-F</code> 进行解锁。不过这个功能只是为了保护核心问答不被篡改而设计的，使用这两个选项本身的最低权限也是 4 级，绝大部分玩家都不会有这个权限。</p><h2 id="设置触发时段" tabindex="-1">设置触发时段 <a class="header-anchor" href="#设置触发时段" aria-label="Permalink to &quot;设置触发时段&quot;">​</a></h2><p>我们有时也希望问答仅在一定的时间段被触发。此时，可以使用 <code>-t</code> 和 <code>-T</code> 来控制触发的时段。下面给出一些简单的示例：</p><table><thead><tr><th style="text-align:left;">命令</th><th style="text-align:left;">效果</th></tr></thead><tbody><tr><td style="text-align:left;"># 问题 回答 -t 10:00 -T 12:30</td><td style="text-align:left;">添加在每天 10:00~12:30 触发的问答</td></tr><tr><td style="text-align:left;"># 问题 回答 -t 22 -T 4</td><td style="text-align:left;">添加在每天 22 时到次日 4 时触发的问答</td></tr><tr><td style="text-align:left;">#123 -t 12:00</td><td style="text-align:left;">将问题 123 的触发时段起始时间设置为每天 12:00</td></tr></tbody></table><p>同样与好感度类似，上述定义为前闭后开区间，且如果 t=T 则认为所有时间都允许触发。在搜索时，我们也用 <code>-t</code> 和 <code>-T</code> 表示允许触发和不允许触发的时间节点。例如，t=15, T=1 可以匹配 t=10, T=20 的问题，但是不能匹配 t=10, T=4 或 t=23, T=11 的问题。</p><h2 id="防刷屏机制" tabindex="-1">防刷屏机制 <a class="header-anchor" href="#防刷屏机制" aria-label="Permalink to &quot;防刷屏机制&quot;">​</a></h2><p>为了控制机器人在单一群触发教学问答的频率，我们可以设定当机器人在 1 分钟内在某个群中触发过超过 10 次问答，则 Koishi 将忽略该群内的消息直到这个数字降低到 10 以下为止。这里的数值都是可以配置的：</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">koishi.yml</span><pre><code><span class="line"><span style="color:var(--shiki-token-parameter);">plugins</span><span style="color:var(--shiki-token-text);">:</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">  </span><span style="color:var(--shiki-token-parameter);">teach</span><span style="color:var(--shiki-token-text);">:</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">    </span><span style="color:var(--shiki-token-parameter);">throttle</span><span style="color:var(--shiki-token-text);">:</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">      </span><span style="color:var(--shiki-token-parameter);">responses</span><span style="color:var(--shiki-token-text);">: </span><span style="color:var(--shiki-token-number);">10</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">      </span><span style="color:var(--shiki-token-parameter);">interval</span><span style="color:var(--shiki-token-text);">: </span><span style="color:var(--shiki-token-number);">60000</span></span></code></pre></div><p>为了防止多个机器人之间的循环触发，以及部分用户的攻击性刷屏行为，我们可以设定如果最近的 5 次教学问答都由某 1 个用户触发，则 Koishi 将不会继续响应来自该用户的教学问答。该效果会在该用户没有发送除指令调用以外消息之后的 5 分钟内被解除。这里的数值也都是可以配置的：</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">koishi.yml</span><pre><code><span class="line"><span style="color:var(--shiki-token-parameter);">plugins</span><span style="color:var(--shiki-token-text);">:</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">  </span><span style="color:var(--shiki-token-parameter);">teach</span><span style="color:var(--shiki-token-text);">:</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">    </span><span style="color:var(--shiki-token-parameter);">preventLoop</span><span style="color:var(--shiki-token-text);">:</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">      </span><span style="color:var(--shiki-token-parameter);">length</span><span style="color:var(--shiki-token-text);">: </span><span style="color:var(--shiki-token-number);">5</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">      </span><span style="color:var(--shiki-token-parameter);">participants</span><span style="color:var(--shiki-token-text);">: </span><span style="color:var(--shiki-token-number);">1</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">      </span><span style="color:var(--shiki-token-parameter);">debounce</span><span style="color:var(--shiki-token-text);">: </span><span style="color:var(--shiki-token-number);">300000</span></span></code></pre></div><h2 id="使用静态图片服务" tabindex="-1">使用静态图片服务 <a class="header-anchor" href="#使用静态图片服务" aria-label="Permalink to &quot;使用静态图片服务&quot;">​</a></h2>`,17),l=[o];function r(i,p,c,h,k,d){return t(),e("div",null,l)}const m=a(n,[["render",r]]);export{v as __pageData,m as default};
