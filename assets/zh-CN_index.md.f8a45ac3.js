import{_ as c,l as _,m as d,n as s,B as a,G as l,Q as t,s as i,J as e}from"./chunks/framework.4100087b.js";const G=JSON.parse('{"title":"基本用法","description":"","frontmatter":{},"headers":[],"relativePath":"zh-CN/index.md","filePath":"zh-CN/index.md"}'),r={name:"zh-CN/index.md"},u=t('<h1 id="基本用法" tabindex="-1">基本用法 <a class="header-anchor" href="#基本用法" aria-label="Permalink to &quot;基本用法&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">提示</p><p>本章介绍的功能都由 koishi-plugin-dialogue 插件提供。</p></div><p><strong>问答</strong>是 Koishi 教学系统中的基本单位。一个问答包含一个问题、其对应的回答以及其他相关的设置。<strong>问题</strong>用于匹配 Bot 收到的消息，如果匹配成功，则会将<strong>回答</strong>作为该消息的响应。一个问题可以对应多种回答，每种回答也可能包含多条消息。但无论如何这都可以用一条问答来表示。</p><p><strong>问答编号</strong>是每个问答特有的编号，你可以用其修改问答本身或是设置前置和后继问题。</p><h2 id="添加问答" tabindex="-1">添加问答 <a class="header-anchor" href="#添加问答" aria-label="Permalink to &quot;添加问答&quot;">​</a></h2><p>使用 <code># 问题 回答</code> 的语法来添加问答。</p>',6),h=i("p",null,"如果问题或回答中包含空白字符（空格，换行等），应该将对应的部分用引号包裹起来（半角全角均可）：",-1),f=i("br",null,null,-1),p=i("br",null,null,-1),m=t('<p>如果要添加的问答已经存在，且拥有修改权限，则会使用额外传入的参数对现有的问答进行修改。添加或修改完成后会提示该问答的编号。</p><h2 id="搜索问答" tabindex="-1">搜索问答 <a class="header-anchor" href="#搜索问答" aria-label="Permalink to &quot;搜索问答&quot;">​</a></h2><p>使用 <code>## 问题 回答</code> 的语法来搜索问答的编号。如果只搜索特定问题的所有回答，可以使用 <code>## 问题</code>。反之，如果只搜索特定回答的所有问题，可以使用 <code>## ~ 回答</code>。这里的 <code>~</code> 充当占位符的作用。</p>',3),k=i("br",null,null,-1),b=i("br",null,null,-1),A=t('<p>由于过长的文本容易带来刷屏的不良体验，因此 Koishi 一次只会提供不超过 30 条搜索结果。如果搜索结果超过这个数字则会进行分页，同时只显示第一页的内容。可以通过 <code>/ 页码</code> 调整要查看的页码。</p><h2 id="查看和修改问答" tabindex="-1">查看和修改问答 <a class="header-anchor" href="#查看和修改问答" aria-label="Permalink to &quot;查看和修改问答&quot;">​</a></h2><div class="tip custom-block"><p class="custom-block-title">提示</p><p>为了避免刷屏，一次查看的问答数量不能超过 10。批量修改问答则没有这个限制。你可以通过配置 <a href="./config.html#max-previews">maxPreviews</a> 修改这个行为。</p></div><p>使用 <code>#id</code> 查看一个问答的具体设置。</p>',4),T=i("br",null,null,-1),g=i("br",null,null,-1),P=t('<p>如果传入了额外的选项和参数，则会视为对该问题的修改。例如，<code>#id 问题</code> 用于修改该问答的问题，<code>#id ~ 回答</code> 用于修改该问答的回答，<code>#id -p 0.5</code> 用于设置问答的概率为 0.5（参见 <a href="./prob.html">概率机制</a> 一节），<code>#id -e</code> 用于使该问答在本群生效（参见 <a href="./context.html">上下文机制</a> 一节）等等。</p>',1),x=i("p",null,[e("特别地，"),i("code",null,"#id -r"),e(" 用于彻底删除一个问答，之后无法恢复。")],-1),K=t('<p>你也可以将上面的 <code>id</code> 替换成由半角逗号隔开的多个问答编号，这样就可以同时查看或者修改多个问答了，例如 <code>#123,456</code>。更特别地，如果你要查看或修改的多个问答有着连续的编号，你还可以使用 <code>#123..126</code> 表示 <code>#123,124,125,126</code>。</p><h2 id="模糊匹配" tabindex="-1">模糊匹配 <a class="header-anchor" href="#模糊匹配" aria-label="Permalink to &quot;模糊匹配&quot;">​</a></h2><p>为了提高教学问答的覆盖面，Koishi 有一套默认的模糊匹配机制。对于每个添加的问题，Koishi 会对其做以下处理：</p><ul><li>繁体字转简体字，大写转小写，全角转半角</li><li>去除开头和结尾处的标点符号</li><li>去除问题中间的空白字符</li><li>去除问题开头的称呼前缀（这里的机制较为复杂，会在后面专门介绍）</li></ul><p>因此，“我喜欢你”和“我 喜 歡 你！”会被认为是相同的问题。但是尽管如此，处理过后的问题往往失去了较高的可读性，因此 Koishi 实际上会保存你教学时使用的原问题，当显示搜索结果和查看问题时显示原问题，而当真正匹配时才使用处理过后的版本。</p><h2 id="特殊语法" tabindex="-1">特殊语法 <a class="header-anchor" href="#特殊语法" aria-label="Permalink to &quot;特殊语法&quot;">​</a></h2><p>最后，在回答中可以使用一些特殊语法：</p><ul><li><strong>$$</strong>：一个普通的 $ 字符</li><li><strong>$0</strong>：收到的原文本</li><li><strong>$n</strong>：分条发送</li><li><strong>$A</strong>：@所有人</li><li><strong>$a</strong>：@说话人</li><li><strong>$m</strong>：@机器人</li><li><strong>$s</strong>：说话人的名字</li></ul><p>下面是一个简单的例子：</p>',9),S=t('<h2 id="管道操作" tabindex="-1">管道操作 <a class="header-anchor" href="#管道操作" aria-label="Permalink to &quot;管道操作&quot;">​</a></h2><p>可以使用 <code>## 查询内容 | 修改操作</code> 来进行问答的批量修改。它的功能是对查询到的每一个问答执行后面的修改操作。</p><p>例如：<code>## 摸摸 | -p 0.5</code> 将会把所有问题为摸摸的问答的概率修改为 0.5。</p><p>当然，如果查询到的问答没有足够的修改权限，还是会提示无法修改的。</p><h2 id="查询近期操作" tabindex="-1">查询近期操作 <a class="header-anchor" href="#查询近期操作" aria-label="Permalink to &quot;查询近期操作&quot;">​</a></h2><p>可以使用 <code>## -v</code> 来查询近期的教学操作：</p>',6),V=i("p",null,[e("或者使用 "),i("code",null,"#id -v"),e(" 来查看特定问答近期的教学操作（这里会显示修改前的版本）：")],-1),C=i("br",null,null,-1),q=i("br",null,null,-1),$=i("br",null,null,-1),N=i("h2",{id:"回退近期操作",tabindex:"-1"},[e("回退近期操作 "),i("a",{class:"header-anchor",href:"#回退近期操作","aria-label":'Permalink to "回退近期操作"'},"​")],-1),v=i("p",null,[e("可以使用 "),i("code",null,"#id -V"),e(" 来回退特定问答近期的教学操作：")],-1);function I(D,E,R,z,B,w){const o=_("chat-message"),n=_("chat-panel");return d(),s("div",null,[u,a(n,null,{default:l(()=>[a(o,{nickname:"Alice"},{default:l(()=>[e("# foo bar")]),_:1}),a(o,{nickname:"Koishi"},{default:l(()=>[e("问答已添加，编号为 1001。")]),_:1}),a(o,{nickname:"Alice"},{default:l(()=>[e("foo")]),_:1}),a(o,{nickname:"Koishi"},{default:l(()=>[e("bar")]),_:1})]),_:1}),h,a(n,null,{default:l(()=>[a(o,{nickname:"Alice"},{default:l(()=>[e("# “有空格 的问题” “有换行"),f,e("的回答”")]),_:1}),a(o,{nickname:"Koishi"},{default:l(()=>[e("问答已添加，编号为 1002。")]),_:1}),a(o,{nickname:"Alice"},{default:l(()=>[e("有空格 的问题")]),_:1}),a(o,{nickname:"Koishi"},{default:l(()=>[e("有换行"),p,e("的回答")]),_:1})]),_:1}),m,a(n,null,{default:l(()=>[a(o,{nickname:"Alice"},{default:l(()=>[e("## foo")]),_:1}),a(o,{nickname:"Koishi"},{default:l(()=>[e("问题“foo”的回答如下："),k,e("1001. bar")]),_:1}),a(o,{nickname:"Alice"},{default:l(()=>[e("## ~ bar")]),_:1}),a(o,{nickname:"Koishi"},{default:l(()=>[e("回答“bar”的问题如下："),b,e("1001. foo")]),_:1})]),_:1}),A,a(n,null,{default:l(()=>[a(o,{nickname:"Alice"},{default:l(()=>[e("#1001")]),_:1}),a(o,{nickname:"Koishi"},{default:l(()=>[e("编号为 1001 的问答信息："),T,e("问题：foo"),g,e("回答：bar")]),_:1})]),_:1}),P,a(n,null,{default:l(()=>[a(o,{nickname:"Alice"},{default:l(()=>[e("#1001 ~ baz")]),_:1}),a(o,{nickname:"Koishi"},{default:l(()=>[e("问答 1001 已成功修改。")]),_:1}),a(o,{nickname:"Alice"},{default:l(()=>[e("foo")]),_:1}),a(o,{nickname:"Koishi"},{default:l(()=>[e("baz")]),_:1})]),_:1}),x,a(n,null,{default:l(()=>[a(o,{nickname:"Alice"},{default:l(()=>[e("#1002 -r")]),_:1}),a(o,{nickname:"Koishi"},{default:l(()=>[e("问答 1002 已成功删除。")]),_:1}),a(o,{nickname:"Alice"},{default:l(()=>[e("有空格 的问题")]),_:1}),e(" '——— 无事发生 ———', ")]),_:1}),K,a(n,null,{default:l(()=>[a(o,{nickname:"Alice"},{default:l(()=>[e("# 你好啊 $s，你好啊~")]),_:1}),a(o,{nickname:"Koishi"},{default:l(()=>[e("问答已添加，编号为 1003。")]),_:1}),a(o,{nickname:"Alice"},{default:l(()=>[e("你好啊！")]),_:1}),a(o,{nickname:"Koishi"},{default:l(()=>[e("Alice，你好啊~")]),_:1})]),_:1}),S,a(n,null,{default:l(()=>[a(o,{nickname:"Alice"},{default:l(()=>[e("## -v")]),_:1}),a(o,{nickname:"Koishi"},{default:l(()=>[e("1003. [添加-25s] 问题：你好啊，回答：$s，你好啊~")]),_:1})]),_:1}),V,a(n,null,{default:l(()=>[a(o,{nickname:"Alice"},{default:l(()=>[e("#1001 -v")]),_:1}),a(o,{nickname:"Koishi"},{default:l(()=>[e("编号为 1001 的问答信息："),C,e("问题：foo"),q,e("回答：bar"),$,e("修改于：15 秒前")]),_:1})]),_:1}),N,v,a(n,null,{default:l(()=>[a(o,{nickname:"Alice"},{default:l(()=>[e("#1001 -V")]),_:1}),a(o,{nickname:"Koishi"},{default:l(()=>[e("问答 1001 已回退完成。")]),_:1}),a(o,{nickname:"Alice"},{default:l(()=>[e("foo")]),_:1}),a(o,{nickname:"Koishi"},{default:l(()=>[e("bar")]),_:1})]),_:1})])}const O=c(r,[["render",I]]);export{G as __pageData,O as default};
